import{u as P,r as o,j as e,I as A,S as y,T as D,R as E,a as O,W}from"./index-d1aa6ff3.js";import{I as j}from"./iconify-43ca2dfd.js";import{S as q}from"./scrollbar-75d01f2c.js";import{a as H,C as $,b as z,c as G,T as J,g as K}from"./company-create-3dbd0892.js";import{C as M}from"./Container-4962c4b9.js";import{B as Q}from"./Button-4b98d499.js";import{C as U}from"./Card-5f6b9976.js";import{T as V,a as X,b as Y}from"./TableContainer-e595e710.js";import{P as Z}from"./Pagination-86f37a8d.js";import"./TableSortLabel-1e497b3b.js";import"./DialogTitle-395825bc.js";import"./Menu-ab006b31.js";import"./Slide-82309297.js";import"./usePreviousProps-27ce0ddb.js";import"./Select-ce817718.js";import"./InputAdornment-e1ff2afe.js";import"./Grid2-263704f9.js";import"./isMuiElement-97e72d0b.js";import"./Tooltip-55be13cc.js";import"./Popper-578077ab.js";import"./TextField-c2cffd25.js";function ee(){const{enqueueSnackbar:l,closeSnackbar:f}=P(),[m,b]=o.useState([]),[S,k]=o.useState({}),[p,g]=o.useState(1),[d,v]=o.useState("asc"),[n,i]=o.useState([]),[u,T]=o.useState("employee_id"),[r,_]=o.useState(""),[I,x]=o.useState(0),h=o.useCallback(a=>e.jsx(A,{color:"inherit",onClick:()=>f(a),children:e.jsx(j,{icon:"eva:close-outline"})}),[f]);o.useEffect(()=>{(async()=>{try{await O.get(`/api/company_list?page=${p}`).then(t=>{t.data.status&&(b(t.data.results),k(t.data.info))}).catch(t=>{l(t.response.data.message,{variant:"error",action:h})})}catch(t){l(t.message,{variant:"error",action:h})}})()},[p,I,h,l]);const w=(a,t)=>{t!==""&&(v(u===t&&d==="asc"?"desc":"asc"),T(t))},B=a=>{if(a.target.checked){const t=m.map(s=>s.company_id);i(t);return}i([])},F=(a,t)=>{const s=n.indexOf(t);let c=[];s===-1?c=c.concat(n,t):s===0?c=c.concat(n.slice(1)):s===n.length-1?c=c.concat(n.slice(0,-1)):s>0&&(c=c.concat(n.slice(0,s),n.slice(s+1))),i(c)},L=(a,t)=>{g(t)},N=a=>{g(0),_(a.target.value)},C=H({inputData:m,comparator:K(d,u),filterName:r}),R=!C.length&&!!r;return e.jsxs(M,{children:[e.jsxs(y,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(D,{variant:"h4",children:"Employee List"}),e.jsx(y,{direction:"row",alignItems:"center",gap:3,children:e.jsx(Q,{href:"/companies/create",variant:"contained",component:E,startIcon:e.jsx(j,{icon:"eva:plus-fill"}),children:"New Company"})})]}),e.jsxs(U,{children:[e.jsx($,{selectedCompanies:n,numSelected:n.length,filterName:r,onFilterName:N,setSelected:i,setRefresh:x}),e.jsx(q,{children:e.jsx(V,{sx:{overflow:"unset"},children:e.jsxs(X,{sx:{minWidth:800},children:[e.jsx(z,{order:d,orderBy:u,rowCount:m.length,numSelected:n.length,onRequestSort:w,onSelectAllClick:B,headLabel:[{id:"company_logo",label:"Company Logo",align:"center"},{id:"company_name",label:"Company Name",align:"center"},{id:"company_website",label:"Company Website",align:"center"},{id:""}]}),e.jsxs(Y,{children:[C.map(a=>e.jsx(G,{setRefresh:x,companyId:a.company_id,companyLogo:a.company_logo,companyName:a.company_name,companyWebsite:a.company_website,selected:n.indexOf(a.company_id)!==-1,handleClick:t=>F(t,a.company_id)},a.id)),R&&e.jsx(J,{query:r})]})]})})}),e.jsx(y,{direction:"row",alignItems:"center",justifyContent:"center",my:3,spacing:2,children:e.jsx(Z,{showFirstButton:!0,showLastButton:!0,count:S.totalPage,page:p,onChange:L,variant:"outlined",shape:"rounded"})})]})]})}function Se(){return e.jsxs(e.Fragment,{children:[e.jsx(W,{children:e.jsx("title",{children:"Comapanies | Refex Contacts"})}),e.jsx(ee,{})]})}export{Se as default};
