import{q as C,c as I,e as P,r as s,j as e,B as u,af as T,d as k,ag as F,S as d,T as c,ah as W,I as E,L as q,a as B,W as R}from"./index-363c422c.js";import{I as _}from"./iconify-a0cb73a7.js";import{C as A}from"./Card-2e5797a9.js";import{T as m}from"./TextField-6f77f113.js";import{I as M}from"./InputAdornment-a4425292.js";import{L as V}from"./LoadingButton-75407970.js";import"./Select-6e9f1e9e.js";import"./Menu-a55f4c52.js";import"./isMuiElement-633dbc8c.js";import"./Button-82ef90ed.js";function z(){const g=C(),x=I(),{login:p}=P(),[r,h]=s.useState(""),[i,f]=s.useState(""),[j,n]=s.useState(!1),[w,S]=s.useState(!1),[y,a]=s.useState(""),[l,L]=s.useState(!1),v=o=>{o.preventDefault(),a(null),n(!0),r===""||r===null||i===""||i===null?setTimeout(()=>{a("Email and Password is required."),n(!1)},1e3):B.post("/api/login",{email:r,password:i}).then(t=>{S(t.data.status),t.data.status&&(p(t.data.token,t.data.user_data),a(t.data.message),n(!1),x.push("/employees"))}).catch(t=>{console.error("Login error:",t),setTimeout(()=>{t.response.data.status_code===400?a(t.response.data.results.errors[0].msg):a(t.response.data.message),n(!1)},1e3)})},b=e.jsxs(u,{component:"form",noValidate:!0,onSubmit:v,children:[e.jsxs(d,{spacing:3,children:[e.jsx(m,{required:!0,fullWidth:!0,autoFocus:!0,id:"email",name:"email",label:"Email address",margin:"normal",autoComplete:"email",onChange:o=>h(o.target.value)}),e.jsx(m,{id:"password",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",autoComplete:"current-password",type:l?"text":"password",onChange:o=>f(o.target.value),InputProps:{endAdornment:e.jsx(M,{position:"end",children:e.jsx(E,{onClick:()=>L(!l),edge:"end",children:e.jsx(_,{icon:l?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),e.jsx(d,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{my:3},children:e.jsx(q,{href:"forgot_password",variant:"subtitle2",underline:"hover",sx:{cursor:"pointer"},children:"Forgot password?"})}),e.jsx(V,{fullWidth:!0,loading:j,size:"large",type:"submit",variant:"contained",sx:{mb:1},children:"Login"}),e.jsx(c,{variant:"body2",sx:{fontWeight:600},color:w?"text.success":"error",align:"center",children:y})]});return e.jsxs(u,{sx:{...T({color:k(g.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(F,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(d,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(A,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(c,{variant:"h4",component:"div",my:3,children:"Login to Refex Contacts"}),b]})}),e.jsx(W,{})]})}function Y(){return e.jsxs(e.Fragment,{children:[e.jsx(R,{children:e.jsx("title",{children:" Login | Refex Contacts"})}),e.jsx(z,{})]})}export{Y as default};
