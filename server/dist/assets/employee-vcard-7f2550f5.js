import{b as C,c as _,r as h,j as e,B as t,S as i,A as I,T as m,L as c,d as A,a as x,W as B}from"./index-d1aa6ff3.js";import"./inactive-table-toolbar-03276bb5.js";import{I as s}from"./iconify-43ca2dfd.js";import"./scrollbar-75d01f2c.js";import"./index-1c161df1.js";import{C as E}from"./Container-4962c4b9.js";import{C as L}from"./Card-5f6b9976.js";import{B as g}from"./Button-4b98d499.js";import"./Grid2-263704f9.js";import"./isMuiElement-97e72d0b.js";import"./Tooltip-55be13cc.js";import"./Popper-578077ab.js";import"./Menu-ab006b31.js";import"./Autocomplete-40699fb9.js";import"./Select-ce817718.js";import"./usePreviousProps-27ce0ddb.js";import"./TextField-c2cffd25.js";import"./DialogTitle-395825bc.js";import"./Slide-82309297.js";import"./TableSortLabel-1e497b3b.js";import"./label-18ec9e6b.js";import"./FileSaver.min-56a1c8f6.js";import"./format-number-51badc9f.js";import"./InputAdornment-e1ff2afe.js";function W(){const{employeeId:l}=C(),d=_(),[n,p]=h.useState({employee_id:0,employee_name:"",designation:"",mobile_number:"",landline:"",email:"",photo:null,is_active:0,company:{company_id:"",company_name:"",company_website:"",company_logo:null},branch:{branch_id:"",branch_name:"",branch_address:"",google_map_link:""}});h.useEffect(()=>{(async()=>{try{const o=await x.get(`/api/vcard/${l}`);o.data.status&&(o.data.results[0].is_active?p(o.data.results[0]):d.push("/404"))}catch{d.push("/404"),p([])}})()},[l,d]);const y=async()=>{try{const r=await x.get(`/api/download-vcard/${l}`,{responseType:"blob"});if(r.status===200){const o=new Blob([r.data],{type:"text/vcard"}),a=document.createElement("a");a.download=`${n.employee_name}.vcf`,a.href=window.URL.createObjectURL(o),document.body.appendChild(a),a.click(),document.body.removeChild(a)}else console.error("Failed to download vCard:",r.status,r.statusText)}catch(r){console.error("Error fetching vCard:",r)}},b=async()=>{try{navigator.share!==void 0?await navigator.share({title:"Refex Contacts",text:"Check out this link!",url:`/vcard/${l}`}):console.error("Share API not supported in this browser")}catch(r){console.error("Error sharing:",r)}},u=e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",sx:{verticalAlign:"middle"},children:e.jsx(t,{component:"img",alt:"Company Logo",src:n.company.company_logo,sx:{overflow:"hidden",verticalAlign:"bottom",display:"inline-block",height:"80px"}})}),f=e.jsx(i,{direction:"row",display:"flex",justifyContent:"center",alignItems:"center",sx:{mt:5},children:e.jsx(t,{sx:{width:160,height:160,borderRadius:"50%",background:"linear-gradient(90deg, #2879b6 25%, #7dc244 50%, #ee6a31 100%)",padding:"3px",display:"inline-block"},children:e.jsx(I,{alt:n.employee_name,src:n.photo,sx:{width:"100%",height:"100%",borderRadius:"50%"}})})}),j=e.jsxs(t,{children:[e.jsx(m,{variant:"h4",sx:{mt:2,textAlign:"center",color:"comman.black"},children:n.employee_name}),e.jsx(m,{variant:"h5",sx:{textAlign:"center",color:"comman.black"},children:n.designation}),e.jsx(m,{variant:"h5",sx:{textAlign:"center",color:"comman.black"},children:n.company.company_name})]}),w=e.jsx(t,{component:"img",alt:"vcard-preview",src:"/assets/images/covers/Abstract-BG.jpg",sx:{top:0,width:1,height:1,objectFit:"cover",position:"absolute"}}),v=e.jsxs(i,{gap:2,sx:{mt:5,color:"common.black"},children:[e.jsxs(i,{direction:"row",gap:1.5,alignItems:"center",children:[e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(s,{width:24,icon:"ri:whatsapp-fill"})}),e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(c,{href:`https://api.whatsapp.com/send?phone=91${n.mobile_number}`,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2"},children:"WhatsApp me"})})]}),e.jsxs(i,{direction:"row",gap:1.5,alignItems:"center",children:[e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(s,{width:24,icon:"ic:round-email"})}),e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(c,{href:`mailto:${n.email}`,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:"Email me"})})]}),e.jsxs(i,{direction:"row",gap:1.5,alignItems:"center",children:[e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(s,{width:24,icon:"fluent:globe-search-24-filled"})}),e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(c,{href:n.company.company_website,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:n.company.company_website.replace(/^https?:\/\//,"")})})]}),e.jsxs(i,{direction:"row",gap:1.5,alignItems:"center",children:[e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(s,{width:24,icon:"mdi:location"})}),e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(c,{href:n.branch.google_map_link,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:n.branch.branch_address})})]})]}),k=e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",children:e.jsxs(i,{direction:{xs:"column",sm:"row"},justifyContent:"center",alignItems:"center",spacing:{xs:2,sm:4},sx:{mt:3,width:"100%",alignItems:"center"},children:[e.jsx(g,{variant:"contained",onClick:y,startIcon:e.jsx(s,{width:24,icon:"solar:user-plus-rounded-bold-duotone"}),sx:{width:{xs:"100%",sm:150}},children:"Save"}),e.jsx(g,{variant:"contained",onClick:b,startIcon:e.jsx(s,{width:24,icon:"solar:share-bold-duotone"}),sx:{width:{xs:"100%",sm:150}},children:"Share"})]})});return e.jsx(E,{maxWidth:"xl",sx:{backgroundColor:"#282829",minHeight:"100vh",py:2},children:e.jsx(i,{direction:"row",alignItems:"center",justifyContent:"center",sx:{minHeight:"80vh"},children:e.jsx(t,{sx:{width:{xs:"100%",sm:"80%",md:"60%",lg:"460px"},borderRadius:2,background:"linear-gradient(90deg, #2879b6 25%, #7dc244 50%, #ee6a31 100%)",p:"5px",display:"flex",justifyContent:"center"},children:e.jsxs(L,{sx:{width:"100%",position:"relative",minHeight:{xs:750,sm:750,md:750}},children:[e.jsx(t,{sx:{height:"100%","&:after":{content:"''",position:"absolute",top:0,left:0,width:"100%",height:"100%",bgcolor:r=>A(r.palette.grey[300],.1),zIndex:1}},children:w}),e.jsxs(t,{sx:{position:"absolute",top:0,width:"100%",zIndex:2,p:{xs:2,sm:4}},children:[u,f,j,v,k]})]})})})})}function ne(){return e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsx("title",{children:"Employee Visiting Card | Refex Contacts"})}),e.jsx(W,{})]})}export{ne as default};
