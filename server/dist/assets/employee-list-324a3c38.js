import{u as V,r as l,j as e,I as W,S as d,T as E,R as v,B as H,a as M,W as U}from"./index-f12b73c5.js";import{E as z,a as G,b as J,T as K}from"./inactive-table-toolbar-404c80b6.js";import{I as T}from"./iconify-a50f81ac.js";import{S as Q}from"./scrollbar-ed45b864.js";import{C as X}from"./Container-783a6e9b.js";import{B}from"./Button-5575cac5.js";import{C as Y}from"./Card-459999ea.js";import{T as Z,a as ee,b as te}from"./TableContainer-9eaa5301.js";import{T as ae,a as ne}from"./TableSortLabel-76ac109b.js";import{P as le}from"./Pagination-74a9a2bd.js";import"./Grid2-43d6fe33.js";import"./isMuiElement-e4b8223b.js";import"./Tooltip-cc5055e8.js";import"./Popper-035bf728.js";import"./Menu-9a907140.js";import"./Autocomplete-804f819e.js";import"./Select-dcb22a80.js";import"./usePreviousProps-1af062f2.js";import"./TextField-82c53081.js";import"./DialogTitle-e2b0e328.js";import"./Slide-2bbacd59.js";import"./label-c8f46cab.js";import"./FileSaver.min-e3a74a8c.js";import"./format-number-c9d63565.js";import"./InputAdornment-6dd92fb9.js";const se=[{id:"ep.employee_id",label:"Employee ID"},{id:"ep.employee_name",label:"Name"},{id:"ep.mobile_number",label:"Mobile Number"},{id:"ep.landline",label:"Landline"},{id:"ep.designation",label:"designation"},{id:"cp.company_name",label:"Company"},{id:"cpb.branch_name",label:"Branch"},{id:"ep.is_active",label:"Status"},{id:""}],oe=[{id:"ep.employee_id",label:"Employee ID"},{id:"ep.employee_name",label:"Name"},{id:"ep.mobile_number",label:"Mobile Number"},{id:"cp.company_name",label:"Company"},{id:"cpb.branch_name",label:"Branch"}];function ie(){const{enqueueSnackbar:f,closeSnackbar:g}=V(),[p,h]=l.useState([]),[F,u]=l.useState({}),[b,j]=l.useState(1),[r,I]=l.useState("asc"),[n,i]=l.useState([]),[y,k]=l.useState("ep.employee_id"),[m,N]=l.useState("ep.id"),[c,A]=l.useState(""),[L,S]=l.useState(0),_=l.useCallback(t=>e.jsx(W,{color:"inherit",onClick:()=>g(t),children:e.jsx(T,{icon:"eva:close-outline"})}),[g]);l.useEffect(()=>{(async()=>{try{await M.get(`/api/employees?field=${y}&search=${c}&sort=${m}&order=${r}&page=${b}`).then(a=>{a.data.status&&(h(a.data.results),u(a.data.info))}).catch(a=>{h([]),u({})})}catch(a){h([]),u({}),f(a.message,{variant:"error",action:_})}})()},[y,c,m,r,b,L,_,f]);const R=(t,a)=>{a!==""&&(I(m===a&&r==="asc"?"desc":"asc"),N(a))},D=t=>{if(t.target.checked){const a=p.map(s=>s.employee_id);i(a);return}i([])},P=()=>{i([])},$=(t,a)=>{const s=n.indexOf(a);let o=[];s===-1?o=o.concat(n,a):s===0?o=o.concat(n.slice(1)):s===n.length-1?o=o.concat(n.slice(0,-1)):s>0&&(o=o.concat(n.slice(0,s),n.slice(s+1))),i(o)},O=(t,a)=>{j(a)},q=(t="ep.employee_id")=>{k(t)},w=t=>{j(1),A(t.target.value)},x=p,C=!x.length&&!!c;return e.jsxs(X,{maxWidth:"xl",children:[e.jsxs(d,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(E,{variant:"h4",children:"Employee List"}),e.jsxs(d,{direction:"row",alignItems:"center",gap:3,children:[e.jsx(B,{href:"/employees/create",variant:"contained",component:v,startIcon:e.jsx(T,{icon:"eva:plus-fill"}),children:"New Employee"}),e.jsx(B,{href:"/employees/inactive",variant:"contained",component:v,children:"View Inactive Employees"})]})]}),e.jsxs(Y,{children:[e.jsx(z,{onUnselectAll:P,selectedEmployees:n,setSelectedEmployees:i,numSelected:n.length,filterBy:oe,filterName:c,filterField:y,onFilterValue:w,onFilterField:q,setRefresh:S}),e.jsx(Q,{children:e.jsx(Z,{sx:{overflow:"unset"},children:e.jsxs(ee,{sx:{minWidth:800},children:[e.jsx(G,{order:r,orderBy:m,rowCount:p.length,numSelected:n.length,onRequestSort:R,onSelectAllClick:D,headLabel:se}),e.jsxs(te,{children:[x.length<1&&!C&&e.jsx(ae,{sx:{height:300},children:e.jsx(ne,{colSpan:10,children:e.jsxs(d,{spacing:1,children:[e.jsx(H,{component:"img",src:"/assets/icons/ic_content.svg",sx:{height:120,mx:"auto"}}),e.jsx(E,{textAlign:"center",variant:"subtitle1",color:"text.secondary",component:"span",children:"No Data"})]})})}),x.map(t=>e.jsx(J,{setRefresh:S,employeeId:t.employee_id,name:t.employee_name,email:t.email,photo:t.photo,designation:t.designation,mobileNumber:t.mobile_number,landline:t.landline,company:t.company.company_name,branch:t.branch.branch_name,status:t.is_active,selected:n.indexOf(t.employee_id)!==-1,handleClick:a=>$(a,t.employee_id)},t.id)),C&&e.jsx(K,{query:c})]})]})})}),e.jsx(d,{direction:"row",alignItems:"center",justifyContent:"center",my:3,gap:15,children:e.jsx(le,{showFirstButton:!0,showLastButton:!0,count:F.totalPage,page:b,onChange:O,variant:"outlined",shape:"rounded"})})]})]})}function Le(){return e.jsxs(e.Fragment,{children:[e.jsx(U,{children:e.jsx("title",{children:"Employees | Refex Contacts"})}),e.jsx(ie,{})]})}export{Le as default};
