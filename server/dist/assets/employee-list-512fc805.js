import{u as V,r as l,j as e,I as W,S as d,T as E,R as v,B as H,a as M,W as U}from"./index-363c422c.js";import{E as z,a as G,b as J,T as K}from"./inactive-table-toolbar-a9186931.js";import{I as T}from"./iconify-a0cb73a7.js";import{S as Q}from"./scrollbar-8336d8fd.js";import{C as X}from"./Container-bfd98d73.js";import{B}from"./Button-82ef90ed.js";import{C as Y}from"./Card-2e5797a9.js";import{T as Z,a as ee,b as te}from"./TableContainer-db1d4304.js";import{T as ae,a as ne}from"./TableSortLabel-acb732ec.js";import{P as le}from"./Pagination-d66ae9dc.js";import"./index-0a1fbdb1.js";import"./Grid2-3381ca04.js";import"./isMuiElement-633dbc8c.js";import"./Tooltip-3211b10f.js";import"./Popper-b4d727f8.js";import"./Menu-a55f4c52.js";import"./Autocomplete-a7927d41.js";import"./Select-6e9f1e9e.js";import"./usePreviousProps-e5b39516.js";import"./TextField-6f77f113.js";import"./DialogTitle-e4f7060f.js";import"./Slide-b183d0e7.js";import"./label-5aefaf0e.js";import"./FileSaver.min-df658628.js";import"./format-number-5aba10d8.js";import"./InputAdornment-a4425292.js";const oe=[{id:"ep.employee_id",label:"Employee ID"},{id:"ep.employee_name",label:"Name"},{id:"ep.mobile_number",label:"Mobile Number"},{id:"ep.landline",label:"Landline"},{id:"ep.designation",label:"designation"},{id:"cp.company_name",label:"Company"},{id:"cpb.branch_name",label:"Branch"},{id:"ep.is_active",label:"Status"},{id:""}],se=[{id:"ep.employee_id",label:"Employee ID"},{id:"ep.employee_name",label:"Name"},{id:"ep.mobile_number",label:"Mobile Number"},{id:"cp.company_name",label:"Company"},{id:"cpb.branch_name",label:"Branch"}];function ie(){const{enqueueSnackbar:f,closeSnackbar:g}=V(),[p,h]=l.useState([]),[F,u]=l.useState({}),[b,j]=l.useState(1),[r,I]=l.useState("asc"),[n,i]=l.useState([]),[y,k]=l.useState("ep.employee_id"),[m,N]=l.useState("ep.id"),[c,A]=l.useState(""),[L,S]=l.useState(0),_=l.useCallback(t=>e.jsx(W,{color:"inherit",onClick:()=>g(t),children:e.jsx(T,{icon:"eva:close-outline"})}),[g]);l.useEffect(()=>{(async()=>{try{await M.get(`/api/employees?field=${y}&search=${c}&sort=${m}&order=${r}&page=${b}`).then(a=>{a.data.status&&(h(a.data.results),u(a.data.info))}).catch(a=>{h([]),u({})})}catch(a){h([]),u({}),f(a.message,{variant:"error",action:_})}})()},[y,c,m,r,b,L,_,f]);const R=(t,a)=>{a!==""&&(I(m===a&&r==="asc"?"desc":"asc"),N(a))},D=t=>{if(t.target.checked){const a=p.map(o=>o.employee_id);i(a);return}i([])},P=()=>{i([])},$=(t,a)=>{const o=n.indexOf(a);let s=[];o===-1?s=s.concat(n,a):o===0?s=s.concat(n.slice(1)):o===n.length-1?s=s.concat(n.slice(0,-1)):o>0&&(s=s.concat(n.slice(0,o),n.slice(o+1))),i(s)},O=(t,a)=>{j(a)},q=(t="ep.employee_id")=>{k(t)},w=t=>{j(1),A(t.target.value)},x=p,C=!x.length&&!!c;return e.jsxs(X,{maxWidth:"xl",children:[e.jsxs(d,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(E,{variant:"h4",children:"Employee List"}),e.jsxs(d,{direction:"row",alignItems:"center",gap:3,children:[e.jsx(B,{href:"/employees/create",variant:"contained",component:v,startIcon:e.jsx(T,{icon:"eva:plus-fill"}),children:"New Employee"}),e.jsx(B,{href:"/employees/inactive",variant:"contained",component:v,children:"View Inactive Employees"})]})]}),e.jsxs(Y,{children:[e.jsx(z,{onUnselectAll:P,selectedEmployees:n,setSelectedEmployees:i,numSelected:n.length,filterBy:se,filterName:c,filterField:y,onFilterValue:w,onFilterField:q,setRefresh:S}),e.jsx(Q,{children:e.jsx(Z,{sx:{overflow:"unset"},children:e.jsxs(ee,{sx:{minWidth:800},children:[e.jsx(G,{order:r,orderBy:m,rowCount:p.length,numSelected:n.length,onRequestSort:R,onSelectAllClick:D,headLabel:oe}),e.jsxs(te,{children:[x.length<1&&!C&&e.jsx(ae,{sx:{height:300},children:e.jsx(ne,{colSpan:10,children:e.jsxs(d,{spacing:1,children:[e.jsx(H,{component:"img",src:"/assets/icons/ic_content.svg",sx:{height:120,mx:"auto"}}),e.jsx(E,{textAlign:"center",variant:"subtitle1",color:"text.secondary",component:"span",children:"No Data"})]})})}),x.map(t=>e.jsx(J,{setRefresh:S,employeeId:t.employee_id,name:t.employee_name,email:t.email,photo:t.photo,designation:t.designation,mobileNumber:t.mobile_number,landline:t.landline,company:t.company.company_name,branch:t.branch.branch_name,status:t.is_active,selected:n.indexOf(t.employee_id)!==-1,handleClick:a=>$(a,t.employee_id)},t.id)),C&&e.jsx(K,{query:c})]})]})})}),e.jsx(d,{direction:"row",alignItems:"center",justifyContent:"center",my:3,gap:15,children:e.jsx(le,{showFirstButton:!0,showLastButton:!0,count:F.totalPage,page:b,onChange:O,variant:"outlined",shape:"rounded"})})]})]})}function Re(){return e.jsxs(e.Fragment,{children:[e.jsx(U,{children:e.jsx("title",{children:"Employees | Refex Contacts"})}),e.jsx(ie,{})]})}export{Re as default};
