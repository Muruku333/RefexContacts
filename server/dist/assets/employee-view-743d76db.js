import{b as E,c as B,u as A,r as c,j as e,I as $,B as i,S as a,A as S,T as d,L as m,d as Q,a as y,W as D}from"./index-a777d7f5.js";import{Q as O,h as P}from"./inactive-table-toolbar-d87c5fcf.js";import{I as n}from"./iconify-18481c23.js";import"./scrollbar-1187ad0e.js";import{C as q}from"./Container-a9be5881.js";import{B as l}from"./Button-9601f7fc.js";import{G as g}from"./Grid2-54b2fcb3.js";import{C as f}from"./Card-af6e39fc.js";import"./Tooltip-2dd9d556.js";import"./Popper-58f8da5e.js";import"./Menu-3087e4c6.js";import"./Autocomplete-afa9c5f7.js";import"./Select-830ff45d.js";import"./usePreviousProps-ea61e00c.js";import"./TextField-0a4fbc7b.js";import"./isMuiElement-47dc8ce1.js";import"./DialogTitle-402b5a23.js";import"./Slide-51b2bef2.js";import"./TableSortLabel-21c459a9.js";import"./label-4adb8ab2.js";import"./FileSaver.min-7405d4d7.js";import"./format-number-70dbb437.js";import"./InputAdornment-b00c4ced.js";function G(){const{employeeId:s}=E(),p=B(),{enqueueSnackbar:h,closeSnackbar:b}=A(),x=c.useRef(null),[t,j]=c.useState({employee_id:0,employee_name:"",designation:"",mobile_number:"",landline:"",email:"",photo:null,is_active:0,company:{company_id:"",company_name:"",company_website:"",company_logo:null},branch:{branch_id:"",branch_name:"",branch_address:"",google_map_link:""}}),[v,k]=c.useState(0);c.useEffect(()=>{(async()=>{try{const r=await y.get(`/api/employees/${s}`);r.data.status&&j(r.data.results[0])}catch(r){console.error("Error fetching employee data:",r),j([])}})()},[s,v]);const u=c.useCallback(o=>e.jsx($,{color:"inherit",onClick:()=>b(o),children:e.jsx(n,{icon:"eva:close-outline"})}),[b]),w=()=>{try{y.patch(`/api/employees/${s}?active=${t.is_active?"0":"1"}`).then(o=>{o.data.status&&(h(o.data.message,{variant:"success",action:u}),k(r=>r+1))}).catch(o=>{h(o.response.data.message,{variant:"error",action:u})})}catch(o){h(o.message,{variant:"error",action:u})}},_=()=>{x.current&&P(x.current,{scale:2}).then(o=>{const r=document.createElement("a");r.href=o.toDataURL("image/png"),r.download=`QRCode_${s}.png`,r.click()}).catch(o=>{console.error("Error generating QR code image:",o)})},C=e.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",sx:{verticalAlign:"middle"},children:e.jsx(i,{component:"img",alt:"Company Logo",src:t.company.company_logo,sx:{height:"80px"}})}),I=e.jsx(a,{direction:"row",display:"flex",justifyContent:"center",alignItems:"center",sx:{mt:5},children:e.jsx(i,{sx:{width:160,height:160,borderRadius:"50%",background:"linear-gradient(90deg, #2879b6 25%, #7dc244 50%, #ee6a31 100%)",padding:"3px",display:"inline-block"},children:e.jsx(S,{alt:t.employee_name,src:t.photo,sx:{width:"100%",height:"100%",borderRadius:"50%"}})})}),R=e.jsxs(i,{children:[e.jsx(d,{variant:"h4",sx:{mt:2,textAlign:"center",color:"comman.black"},children:t.employee_name}),e.jsx(d,{variant:"h5",sx:{textAlign:"center",color:"comman.black"},children:t.designation}),e.jsx(d,{variant:"h5",sx:{textAlign:"center",color:"comman.black"},children:t.company.company_name})]}),W=e.jsx(i,{component:"img",alt:"vcard-preview",src:"/assets/images/covers/Abstract-BG.jpg",sx:{top:0,width:1,height:1,objectFit:"cover",position:"absolute"}}),L=e.jsxs(a,{spacing:2,sx:{mt:5,color:"common.black"},children:[e.jsxs(a,{direction:"row",children:[e.jsx(n,{width:24,icon:"ri:whatsapp-fill",sx:{mr:1.5}}),e.jsx(m,{href:`https://api.whatsapp.com/send?phone=91${t.mobile_number}`,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2"},children:"WhatsApp me"})]}),e.jsxs(a,{direction:"row",children:[e.jsx(n,{width:24,icon:"ic:round-email",sx:{mr:1.5}}),e.jsx(m,{href:`mailto:${t.email}`,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:"Email me"})]}),e.jsxs(a,{direction:"row",children:[e.jsx(n,{width:24,icon:"fluent:globe-search-24-filled",sx:{mr:1.5}}),e.jsx(m,{href:t.company.company_website,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:t.company.company_website.replace(/^https?:\/\//,"")})]}),e.jsxs(a,{direction:"row",children:[e.jsx(n,{width:24,icon:"mdi:location",sx:{mr:1.5}}),e.jsx(m,{href:t.branch.google_map_link,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:t.branch.branch_address})]})]});return e.jsxs(q,{children:[e.jsxs(a,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(d,{variant:"h4",children:"Employee Preview"}),e.jsx(a,{direction:"row",alignItems:"center",gap:3,children:e.jsx(l,{onClick:()=>{p.push("/employees/list")},variant:"contained",color:"error",startIcon:e.jsx(n,{icon:"eva:arrow-back-fill"}),children:"Back to list"})})]}),e.jsxs(g,{container:!0,spacing:2,columns:{xs:4,sm:12,md:12},width:"100%",children:[e.jsx(g,{xs:4,sm:6,md:6,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(i,{sx:{width:460,height:"100%",borderRadius:2,background:"linear-gradient(90deg, #2879b6 25%, #7dc244 50%, #ee6a31 100%)",padding:"5px",display:"inline-block"},children:e.jsxs(f,{sx:{width:"100%",height:"100%"},children:[e.jsx(i,{sx:{pt:"calc(100% * 4 / 3)","&:after":{top:0,content:"''",width:"100%",height:"100%",position:"absolute",bgcolor:o=>Q(o.palette.grey[300],.1)}},children:W}),e.jsxs(i,{sx:{p:o=>o.spacing(4),width:1,bottom:0,position:"absolute"},children:[C,I,R,L]})]})})}),e.jsx(g,{xs:4,sm:6,md:6,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(f,{sx:{p:6,width:1,maxWidth:450,height:"100%"},children:e.jsxs(a,{justifyContent:"center",alignItems:"center",gap:4,children:[e.jsx(i,{ref:x,sx:{p:2},children:e.jsx(i,{sx:{border:"3px solid black",borderRadius:3,p:1},children:e.jsx(O,{value:`https://contacts.dev.refex.group/vcard/${s}`,logoImage:t.company.company_logo,ecLevel:"M",logoWidth:57,logoHeight:34,size:200,qrStyle:"dots",eyeRadius:10,removeQrCodeBehindLogo:!0,logoPadding:4})})}),e.jsx(l,{fullWidth:!0,onClick:_,variant:"contained",color:"info",startIcon:e.jsx(n,{icon:"solar:download-minimalistic-line-duotone"}),children:"Download"}),e.jsx(l,{onClick:()=>{p.push(`/employees/edit/${s}`)},variant:"contained",color:"info",fullWidth:!0,startIcon:e.jsx(n,{icon:"solar:pen-bold-duotone"}),children:"Edit"}),e.jsx(l,{onClick:()=>{p.push(`/vcard/${s}`)},disabled:!t.is_active,variant:"contained",color:"info",fullWidth:!0,startIcon:e.jsx(n,{icon:"solar:link-bold-duotone"}),children:"Live Link"}),e.jsx(l,{onClick:w,variant:"contained",color:t.is_active?"error":"success",fullWidth:!0,startIcon:e.jsx(n,{icon:"solar:power-bold-duotone"}),children:t.is_active?"Deactivate":"Activate"})]})})})]})]})}function de(){return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsx("title",{children:"Employees | Refex Contacts"})}),e.jsx(G,{})]})}export{de as default};
