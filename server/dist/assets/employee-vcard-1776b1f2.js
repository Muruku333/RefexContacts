import{b as _,c as C,r as m,j as e,B as o,S as i,A,T as p,L as c,d as B,a as x,W as E}from"./index-f12b73c5.js";import"./inactive-table-toolbar-404c80b6.js";import{I as a}from"./iconify-a50f81ac.js";import"./scrollbar-ed45b864.js";import{C as L}from"./Container-783a6e9b.js";import{C as W}from"./Card-459999ea.js";import{B as b}from"./Button-5575cac5.js";import"./Grid2-43d6fe33.js";import"./isMuiElement-e4b8223b.js";import"./Tooltip-cc5055e8.js";import"./Popper-035bf728.js";import"./Menu-9a907140.js";import"./Autocomplete-804f819e.js";import"./Select-dcb22a80.js";import"./usePreviousProps-1af062f2.js";import"./TextField-82c53081.js";import"./DialogTitle-e2b0e328.js";import"./Slide-2bbacd59.js";import"./TableSortLabel-76ac109b.js";import"./label-c8f46cab.js";import"./FileSaver.min-e3a74a8c.js";import"./format-number-c9d63565.js";import"./InputAdornment-6dd92fb9.js";function I(){const{employeeId:l}=_(),d=C(),[t,h]=m.useState({employee_id:0,employee_name:"",designation:"",mobile_number:"",landline:"",email:"",photo:null,is_active:0,company:{company_id:"",company_name:"",company_website:"",company_logo:null},branch:{branch_id:"",branch_name:"",branch_address:"",google_map_link:""}});m.useEffect(()=>{(async()=>{try{const n=await x.get(`/api/vcard/${l}`);n.data.status&&(n.data.results[0].is_active?h(n.data.results[0]):d.push("/404"))}catch{d.push("/404"),h([])}})()},[l,d]);const u=async()=>{try{const r=await x.get(`/api/download-vcard/${l}`,{responseType:"blob"});if(r.status===200){const n=new Blob([r.data],{type:"text/vcard"}),s=document.createElement("a");s.download=`${t.employee_name}.vcf`,s.href=window.URL.createObjectURL(n),document.body.appendChild(s),s.click(),document.body.removeChild(s)}else console.error("Failed to download vCard:",r.status,r.statusText)}catch(r){console.error("Error fetching vCard:",r)}},g=async()=>{try{navigator.share!==void 0?await navigator.share({title:"Refex Contacts",text:"Check out this link!",url:`/vcard/${l}`}):console.error("Share API not supported in this browser")}catch(r){console.error("Error sharing:",r)}},y=e.jsx(o,{display:"flex",justifyContent:"center",alignItems:"center",sx:{verticalAlign:"middle"},children:e.jsx(o,{component:"img",alt:"Company Logo",src:t.company.company_logo,sx:{mt:3,overflow:"hidden",verticalAlign:"bottom",display:"inline-block",height:"80px"}})}),j=e.jsx(i,{direction:"row",display:"flex",justifyContent:"center",alignItems:"center",sx:{mt:5},children:e.jsx(o,{sx:{width:160,height:160,borderRadius:"50%",background:"linear-gradient(90deg, #2879b6 25%, #7dc244 50%, #ee6a31 100%)",padding:"3px",display:"inline-block"},children:e.jsx(A,{alt:t.employee_name,src:t.photo,sx:{width:"100%",height:"100%",borderRadius:"50%"}})})}),v=e.jsxs(o,{children:[e.jsx(p,{variant:"h4",sx:{mt:2,textAlign:"center",color:"comman.black"},children:t.employee_name}),e.jsx(p,{variant:"h5",sx:{textAlign:"center",color:"comman.black"},children:t.designation}),e.jsx(p,{variant:"h5",sx:{textAlign:"center",color:"comman.black"},children:t.company.company_name})]}),w=e.jsx(o,{component:"img",alt:"vcard-preview",src:"/assets/images/covers/Abstract-BG.jpg",sx:{top:0,width:1,height:1,objectFit:"cover",position:"absolute"}}),f=e.jsxs(i,{spacing:2,sx:{mt:5,color:"common.black"},children:[e.jsxs(i,{direction:"row",children:[e.jsx(a,{width:24,icon:"ri:whatsapp-fill",sx:{mr:1.5}}),e.jsx(c,{href:`https://api.whatsapp.com/send?phone=91${t.mobile_number}`,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2"},children:"WhatsApp me"})]}),e.jsxs(i,{direction:"row",children:[e.jsx(a,{width:24,icon:"ic:round-email",sx:{mr:1.5}}),e.jsx(c,{href:`mailto:${t.email}`,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:"Email me"})]}),e.jsxs(i,{direction:"row",children:[e.jsx(a,{width:24,icon:"fluent:globe-search-24-filled",sx:{mr:1.5}}),e.jsx(c,{href:t.company.company_website,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:t.company.company_website.replace(/^https?:\/\//,"")})]}),e.jsxs(i,{direction:"row",children:[e.jsx(a,{width:24,icon:"mdi:location",sx:{mr:1.5}}),e.jsx(c,{href:t.branch.google_map_link,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:t.branch.branch_address})]})]}),k=e.jsx(o,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs(i,{direction:"row",spacing:4,sx:{mt:3},children:[e.jsx(b,{variant:"contained",onClick:u,startIcon:e.jsx(a,{width:24,icon:"solar:user-plus-rounded-bold-duotone"}),sx:{width:150},children:"Save"}),e.jsx(b,{variant:"contained",onClick:g,startIcon:e.jsx(a,{width:24,icon:"solar:share-bold-duotone"}),sx:{width:150},children:"Share"})]})});return e.jsx(L,{maxWidth:"xl",sx:{backgroundColor:"#282829",height:"110vh"},children:e.jsx(i,{direction:"column",alignItems:"center",justifyContent:"space-around",height:"750px",children:e.jsx(o,{sx:{width:460,height:"100%",borderRadius:2,background:"linear-gradient(90deg, #2879b6 25%, #7dc244 50%, #ee6a31 100%)",padding:"5px",display:"inline-block"},children:e.jsxs(W,{sx:{width:"100%",height:"100%"},children:[e.jsx(o,{sx:{pt:"calc(100% * 4 / 3)","&:after":{top:0,content:"''",width:"100%",height:"100%",position:"absolute",bgcolor:r=>B(r.palette.grey[300],.1)}},children:w}),e.jsxs(o,{sx:{p:r=>r.spacing(4),width:1,bottom:0,position:"absolute"},children:[y,j,v,f,k]})]})})})})}function te(){return e.jsxs(e.Fragment,{children:[e.jsx(E,{children:e.jsx("title",{children:"Employee Visiting Card | Refex Contacts"})}),e.jsx(I,{})]})}export{te as default};
