import{b as B,c as W,u as A,r as c,j as e,I as S,B as t,S as s,A as $,T as d,L as m,d as Q,a as b,W as D}from"./index-363c422c.js";import{h as O}from"./inactive-table-toolbar-a9186931.js";import{I as o}from"./iconify-a0cb73a7.js";import"./scrollbar-8336d8fd.js";import{Q as P}from"./index-0a1fbdb1.js";import{C as q}from"./Container-bfd98d73.js";import{B as l}from"./Button-82ef90ed.js";import{G as u}from"./Grid2-3381ca04.js";import{C as f}from"./Card-2e5797a9.js";import"./Tooltip-3211b10f.js";import"./Popper-b4d727f8.js";import"./Menu-a55f4c52.js";import"./Autocomplete-a7927d41.js";import"./Select-6e9f1e9e.js";import"./usePreviousProps-e5b39516.js";import"./TextField-6f77f113.js";import"./isMuiElement-633dbc8c.js";import"./DialogTitle-e4f7060f.js";import"./Slide-b183d0e7.js";import"./TableSortLabel-acb732ec.js";import"./label-5aefaf0e.js";import"./FileSaver.min-df658628.js";import"./format-number-5aba10d8.js";import"./InputAdornment-a4425292.js";function G(){const{employeeId:a}=B(),p=W(),{enqueueSnackbar:h,closeSnackbar:j}=A(),x=c.useRef(null),[n,y]=c.useState({employee_id:0,employee_name:"",designation:"",mobile_number:"",landline:"",email:"",photo:null,is_active:0,company:{company_id:"",company_name:"",company_website:"",company_logo:null},branch:{branch_id:"",branch_name:"",branch_address:"",google_map_link:""}}),[v,w]=c.useState(0);c.useEffect(()=>{(async()=>{try{const r=await b.get(`/api/employees/${a}`);r.data.status&&y(r.data.results[0])}catch(r){console.error("Error fetching employee data:",r),y([])}})()},[a,v]);const g=c.useCallback(i=>e.jsx(S,{color:"inherit",onClick:()=>j(i),children:e.jsx(o,{icon:"eva:close-outline"})}),[j]),k=()=>{try{b.patch(`/api/employees/${a}?active=${n.is_active?"0":"1"}`).then(i=>{i.data.status&&(h(i.data.message,{variant:"success",action:g}),w(r=>r+1))}).catch(i=>{h(i.response.data.message,{variant:"error",action:g})})}catch(i){h(i.message,{variant:"error",action:g})}},C=()=>{x.current&&O(x.current,{scale:2}).then(i=>{const r=document.createElement("a");r.href=i.toDataURL("image/png"),r.download=`QRCode_${a}.png`,r.click()}).catch(i=>{console.error("Error generating QR code image:",i)})},_=e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",sx:{verticalAlign:"middle"},children:e.jsx(t,{component:"img",alt:"Company Logo",src:n.company.company_logo,sx:{height:"80px"}})}),I=e.jsx(s,{direction:"row",display:"flex",justifyContent:"center",alignItems:"center",sx:{mt:5},children:e.jsx(t,{sx:{width:160,height:160,borderRadius:"50%",background:"linear-gradient(90deg, #2879b6 25%, #7dc244 50%, #ee6a31 100%)",padding:"3px",display:"inline-block"},children:e.jsx($,{alt:n.employee_name,src:n.photo,sx:{width:"100%",height:"100%",borderRadius:"50%"}})})}),R=e.jsxs(t,{children:[e.jsx(d,{variant:"h4",sx:{mt:2,textAlign:"center",color:"comman.black"},children:n.employee_name}),e.jsx(d,{variant:"h5",sx:{textAlign:"center",color:"comman.black"},children:n.designation}),e.jsx(d,{variant:"h5",sx:{textAlign:"center",color:"comman.black"},children:n.company.company_name})]}),L=e.jsx(t,{component:"img",alt:"vcard-preview",src:"/assets/images/covers/Abstract-BG.jpg",sx:{top:0,width:1,height:1,objectFit:"cover",position:"absolute"}}),E=e.jsxs(s,{gap:2,sx:{mt:4,color:"common.black"},children:[e.jsxs(s,{direction:"row",gap:1.5,alignItems:"center",children:[e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(o,{width:24,icon:"ri:whatsapp-fill"})}),e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(m,{href:`https://api.whatsapp.com/send?phone=91${n.mobile_number}`,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2"},children:"WhatsApp me"})})]}),e.jsxs(s,{direction:"row",gap:1.5,alignItems:"center",children:[e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(o,{width:24,icon:"ic:round-email"})}),e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(m,{href:`mailto:${n.email}`,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:"Email me"})})]}),e.jsxs(s,{direction:"row",gap:1.5,alignItems:"center",children:[e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(o,{width:24,icon:"fluent:globe-search-24-filled"})}),e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(m,{href:n.company.company_website,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:n.company.company_website.replace(/^https?:\/\//,"")})})]}),e.jsxs(s,{direction:"row",gap:1.5,alignItems:"center",children:[e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(o,{width:24,icon:"mdi:location"})}),e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(m,{href:n.branch.google_map_link,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:n.branch.branch_address})})]})]});return e.jsxs(q,{children:[e.jsxs(s,{direction:{xs:"column",sm:"row"},alignItems:{xs:"flex-start",sm:"center"},justifyContent:"space-between",mb:5,gap:2,children:[e.jsx(d,{variant:"h4",children:"Employee Preview"}),e.jsx(l,{onClick:()=>{p.push("/employees/list")},variant:"contained",color:"error",startIcon:e.jsx(o,{icon:"eva:arrow-back-fill"}),sx:{width:{xs:"100%",sm:"auto"},alignSelf:{xs:"stretch",sm:"auto"}},children:"Back to list"})]}),e.jsxs(u,{container:!0,spacing:2,columns:{xs:4,sm:12,md:12},width:"100%",children:[e.jsx(u,{item:!0,xs:4,sm:6,md:6,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(t,{sx:{width:{xs:"100%",sm:"80%",md:460},borderRadius:2,background:"linear-gradient(90deg, #2879b6 25%, #7dc244 50%, #ee6a31 100%)",padding:"5px",display:"flex",justifyContent:"center"},children:e.jsxs(f,{sx:{width:"100%",position:"relative",minHeight:{xs:650,sm:650,md:650}},children:[e.jsx(t,{sx:{pt:"calc(100% * 4 / 3)","&:after":{top:0,content:"''",width:"100%",height:"100%",position:"absolute",bgcolor:i=>Q(i.palette.grey[300],.1)}},children:L}),e.jsxs(t,{sx:{p:4,width:"100%",position:"absolute",top:0},children:[_,I,R,E]})]})})}),e.jsx(u,{item:!0,xs:4,sm:6,md:6,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(f,{sx:{p:{xs:3,sm:6},width:"100%",maxWidth:450,height:1},children:e.jsxs(s,{justifyContent:"center",alignItems:"center",gap:4,children:[e.jsx(t,{ref:x,sx:{p:2},children:e.jsx(t,{sx:{border:"3px solid black",borderRadius:3,p:1},children:e.jsx(P,{value:`https://contacts.dev.refex.group/vcard/${a}`,logoImage:n.company.company_logo,ecLevel:"M",logoWidth:57,logoHeight:34,size:200,qrStyle:"dots",eyeRadius:10,removeQrCodeBehindLogo:!0,logoPadding:4})})}),e.jsxs(s,{spacing:2,width:"100%",children:[e.jsx(l,{variant:"contained",color:"info",onClick:C,startIcon:e.jsx(o,{icon:"solar:download-minimalistic-line-duotone"}),sx:{width:"100%"},children:"Download"}),e.jsx(l,{variant:"contained",color:"info",onClick:()=>p.push(`/employees/edit/${a}`),startIcon:e.jsx(o,{icon:"solar:pen-bold-duotone"}),sx:{width:"100%"},children:"Edit"}),e.jsx(l,{variant:"contained",color:"info",disabled:!n.is_active,onClick:()=>p.push(`/vcard/${a}`),startIcon:e.jsx(o,{icon:"solar:link-bold-duotone"}),sx:{width:"100%"},children:"Live Link"}),e.jsx(l,{variant:"contained",color:n.is_active?"error":"success",onClick:k,startIcon:e.jsx(o,{icon:"solar:power-bold-duotone"}),sx:{width:"100%"},children:n.is_active?"Deactivate":"Activate"})]})]})})})]})]})}function me(){return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsx("title",{children:"Employees | Refex Contacts"})}),e.jsx(G,{})]})}export{me as default};
